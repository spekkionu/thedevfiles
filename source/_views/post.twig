{% extends "default" %}

{% block head_meta %}
    {{ parent() }}
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="{{ site.url }}{{ page.url }}/">
    {% if page.prev %}
        <link rel="prev" href="{{ site.url }}{{ page.prev }}">
    {% endif %}
    {% if page.next %}
        <link rel="next" href="{{ site.url }}{{ page.next }}">
    {% endif %}
    {% if page.first %}
        <link rel="first" href="{{ site.url }}{{ page.first }}">
    {% endif %}
    {% if page.last %}
        <link rel="last" href="{{ site.url }}{{ page.last }}">
    {% endif %}
{% endblock %}

{% block content_wrapper %}
    <article class="post h-entry" itemid="{{ site.url }}{{ page.url }}/" itemscope itemtype="http://schema.org/BlogPosting">
        <header class="post__header">
            <h1 class="post__title p-name" itemprop="headline">{{ page.title }}</h1>

            <h2 class="post__date">{{ page.date|date('M jS, Y') }}</h2>
        </header>
        <div class="post__body e-content" itemprop="articleBody">
            {{ page.blocks.content|raw }}
        </div>
        <footer class="post__footer">
            <ul class="past__meta">
                <li class="post__byline">Posted by <span class="post__author p-author h-card" itemprop="author">Jonathan Bernardi</span></li>
                <li>
                    <time class="post__date--footer dt-published" itemprop="datePublished" content="{{ page.date|date('c') }}"
                          datetime="{{ page.date|date('c') }}">{{ page.date|date('M jS, Y') }}</time>
                </li>
                {% if page.tags %}
                    <li>
                        <span class="post__tags p-category">
                        {% for tag in page.tags|sort %}
                            <a class="post__tag"
                               href="/tag/{{ tag|url_encode(true) }}/">{{ tag }}</a>{% if not loop.last %}, {% endif %}
                        {% endfor %}
                        </span>
                    </li>
                {% endif %}
            </ul>
            <meta class="u-url" itemprop="url" content="{{ site.url }}{{ page.url }}/">
            {% if page.tags %}
                <meta itemprop="keywords" content="{{ page.tags|sort|join(', ') }}">
            {% endif %}
            {% if page.description %}
                <meta class="p-summary" itemprop="description" content="{{ page.description }}">
            {% endif %}
        </footer>

        {% if page.sharing %}
            {% include 'post/sharing.twig' %}
        {% endif %}

        {% if page.previous_post or page.next_post %}
            <nav class="pagination pagination--simple">
                <ul>
                    {% if page.previous_post %}
                        <li class="pagination--simple__previous">
                            <a href="{{ page.previous_post.url }}/">&laquo; {{ page.previous_post.title }}</a>
                        </li>
                    {% endif %}
                    {% if page.next_post %}
                        <li class="pagination--simple__next">
                            <a href="{{ page.next_post.url }}/">{{ page.next_post.title }} &raquo;</a>
                        </li>
                    {% endif %}
                </ul>
            </nav>
        {% endif %}

        {% if page.comments %}
            {% include 'post/disqus_thread.twig' %}
        {% endif %}

    </article>


{% endblock %}

{% block scripts_after %}
    {% if page.sharing %}
        {% include 'post/facebook_like.twig' %}
        {% include 'post/google_plus_one.twig' %}
        {% include 'post/twitter_sharing.twig' %}
    {% endif %}
{% endblock %}

{% block disqus %}
    {% if page.comments %}
        {% include 'post/disqus.twig' %}
    {% endif %}
{% endblock %}
